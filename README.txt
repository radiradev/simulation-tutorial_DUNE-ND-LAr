How to do particle generation and detector simulation:

This tutorial can easily be run on SLAC computing resources using e.g. the neutrino-jupyter/latest image.  It can be run else where but an image with all the required packages would need to be configured. You will need to install edep-sim, ROOT, and all the packages larnd-sim requires. I recommend installing everything before attempting to run the tutorial.

First you should navigate to larnd-sim_scripts and git clone the larnd-sim git repository (info in a README there). This is to ensure you are running the latest version of larnd-sim, as it is still changing as it is adapted for the full ND-LAr. This software will work for any variation on ND-LAr, such as SingleCube and single Modules (e.g. Module 0). Support for the 2x2 and full ND-LAr is being worked on. As long as the simulation supports the detector of interest, you will just need the geometry for the detector, the pixel yaml file, and the detector properties yaml file. 

Now you can start simulating. Next, navigate to the edep-sim_scripts folder. This is where the event generation and particle energy deposition simulation is done. It uses Geant4 macros and edep-sim (but there are other options for event generation e.g. hepevt input, ROOTRACKER, etc). See the instructions in that folder, and I do highly recommend looking through the edep-sim git repository README for details on edep-sim. After running edep-sim, dumpTree.py must be run to convert the ROOT file to a .h5 file before larnd-sim can be run.

After you've made some edep-sim output files, navigate to the larnd-sim_scripts folder. There are instructions there for how to run larnd-sim there. It takes as input the .h5 file produced at the last step. larnd-sim can be run in a jupyter notebook or as a python script (simulate_pixels.py).
